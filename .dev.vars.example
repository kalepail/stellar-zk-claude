# Cloudflare Worker local vars (`wrangler dev`)
# Copy to .dev.vars and set secrets before running locally.

# Required
PROVER_BASE_URL=https://replace-with-your-prover.example.com

# Required for remote provers. For localhost/127.0.0.1 you may omit auth.
PROVER_API_KEY=
# Optional alternative auth for remote provers (must set both fields).
PROVER_ACCESS_CLIENT_ID=
PROVER_ACCESS_CLIENT_SECRET=

# Prover behavior / policy
PROVER_EXPECTED_IMAGE_ID=
ALLOW_INSECURE_PROVER_URL=0

# Health + request tuning
PROVER_HEALTH_CACHE_MS=30000
PROVER_POLL_INTERVAL_MS=3000
# Target: ~5 min typical proofs, accept up to 10 min.
# Keep this above the prover timeout so the gateway can observe final status.
PROVER_POLL_TIMEOUT_MS=660000
PROVER_POLL_BUDGET_MS=45000
PROVER_REQUEST_TIMEOUT_MS=30000

# Gateway limits + retention
MAX_TAPE_BYTES=2097152
# End-to-end cap (includes queue + polling + R2 writes). Slightly above 10 min.
MAX_JOB_WALL_TIME_MS=660000
MAX_COMPLETED_JOBS=200
COMPLETED_JOB_RETENTION_MS=86400000

# Leaderboard ingestion (event-sourced via Galexie/Lightsail)
SCORE_CONTRACT_ID=
GALEXIE_API_BASE_URL=https://galexie-pro.lightsail.network
# Modes: auto (rpc primary + galexie fallback), rpc, datalake, events_api
GALEXIE_SOURCE_MODE=auto
GALEXIE_RPC_BASE_URL=https://rpc-pro.lightsail.network
GALEXIE_SCORE_EVENTS_PATH=/events
GALEXIE_DATASTORE_ROOT_PATH=/v1
GALEXIE_DATASTORE_OBJECT_EXTENSION=zst
GALEXIE_REQUEST_TIMEOUT_MS=20000

# Automated sync + catch-up window
LEADERBOARD_SYNC_CRON_ENABLED=1
LEADERBOARD_SYNC_CRON_LIMIT=400
LEADERBOARD_CATCHUP_INTERVAL_MINUTES=30
LEADERBOARD_CATCHUP_WINDOW_LEDGERS=8000

# Admin key for protected sync endpoints.
LEADERBOARD_ADMIN_KEY=
# If deploying to Cloudflare, prefer:
#   npx wrangler secret put GALEXIE_API_KEY
#   npx wrangler secret put LEADERBOARD_ADMIN_KEY
GALEXIE_API_KEY=
